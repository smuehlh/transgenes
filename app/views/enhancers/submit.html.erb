<dl>
    <dt>
        Parameters used
    </dt>
    <dd>
        <div class="well well-sm">
            <table class="custom-table">
                <tbody>
                    <tr>
                        <td>Strategy</td>
                        <td><%= @enhanced_gene.strategy.capitalize %></td>
                    </tr>
                    <tr>
                        <td>First intron is kept</td>
                        <td><%= @enhanced_gene.keep_first_intron ? "Yes" : "No" %></td>
                    </tr>
                    <tr>
                        <td>ESE motifs are destroyed</td>
                        <td><%= @enhanced_gene.destroy_ese_motifs ? "Yes" : "No" %></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </dd>
    <dt>
        Gene sequence
    </dt>
    <dd>
        <div class="well well-sm clearfix">
            <%= content_tag(:span,
                    patch_multiline_text_for_web(@enhanced_gene.to_fasta),
                    class: "text-muted monospaced"
            ) %>
        </div>
    </dd>
    <dt>
        Log content
    </dt>
    <dd>
        <div class="well well-sm clearfix">
            <%= content_tag(:span,
                teaser_wrapped_single_word_with_ellipsis(@enhanced_gene.log),
                class: "text-muted monospaced"
            ) %>
            <span data-toggle="modal" data-target="#submit-modal">
                <button type="button" id="submit-modal-button" class="btn btn-primary btn-xs pull-right" data-toggle="tooltip" title="View data">
                    <span class="glyphicon glyphicon-search"></span> View
                </button>
            </span>
            <div id="submit-modal" class="modal" role="dialog">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Log content</h4>
                        </div>
                        <div class="modal-body">
                            <pre class="text-muted input-view-text"><%= @enhanced_gene.log %></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </dd>
    <dt>Overall GC3 content</dt>
    <dl>
        <canvas id="gc3Plot"></canvas>
    </dl>
    <dt>Downloads</dt>
    <dl>
        <%= link_to "Download enhanced gene (as FASTA file).", download_enhancers_path(fasta: true) %>
        <br>
        <%= link_to "Download log file.", download_enhancers_path%>
    </dl>
</dl>
<%
    points = @gc3_across_synonymous_variants
    labels = (1..points.size).to_a
%>
<script>
    var ctx = $("#gc3Plot");
    var scatterChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: <%= raw labels %>,
            datasets: [{ data: <%= raw points %>}]
        },
        options: chartOptions
    });
</script>

<!-- TODO: submit form via ajax to stay on same page... -->